
<div ng-controller="ValTestDetailCtrl">
    <ul class="nav nav-tabs">
        <li id="li_tab_description" class="active"><a class="nav-link" ng-click="toogleTabs('tab_description')" data-toggle="tab">Description</a></li>
        <li id="li_tab_version"><a class="nav-link" ng-click="toogleTabs('tab_version')" data-toggle="tab">Version</a></li>
        <li id="li_tab_results"><a class="nav-link" ng-click="toogleTabs('tab_results')" data-toggle="tab">Results</a></li>
        <li id="li_tab_comments"><a class="nav-link" ng-click="toogleTabs('tab_comments')" data-toggle="tab">Comments</a></li>
    </ul>

    <div class="control-group" id="tab_description" style="display:block;" aria-expanded="true">
        <table class="table table-striped">
            <tbody>
                <tr>
                    <td>ID</td>
                    <td>{{ detail_test.tests[0].id }}</td>
                </tr>
                <tr>
                    <td>Name</td>
                    <td>{{ detail_test.tests[0].name }}</td>
                </tr>
                <tr>
                    <td>Species</td>
                    <td>{{ detail_test.tests[0].species }}</td>
                </tr>
                <tr>
                    <td>Brain region</td>
                    <td>{{ detail_test.tests[0].brain_region }}</td>
                </tr>
                <tr>
                    <td>Cell type</td>
                    <td>{{ detail_test.tests[0].cell_type }}</td>
                </tr>
                <tr>
                    <td>Age</td>
                    <td>{{ detail_test.tests[0].age }}</td>
                </tr>
                <tr>
                    <td>Data location</td>
                    <td>{{ detail_test.tests[0].data_location }}</td>
                </tr>
                <tr>
                    <td>Data type</td>
                    <td>{{ detail_test.tests[0].data_type }}</td>
                </tr>
                <tr>
                    <td>Data modality</td>
                    <td>{{ detail_test.tests[0].data_modality }}</td>
                </tr>
                <tr>
                    <td>Test type</td>
                    <td>{{ detail_test.tests[0].test_type }}</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>{{ detail_test.tests[0].author }}</td>
                </tr>
                <tr>
                    <td>Publication</td>
                    <td>{{ detail_test.tests[0].publication }}</td>
                </tr>
                <tr>
                    <td>Protocol</td>
                    <td>{{ detail_test.tests[0].protocol }}</td>
                </tr>
            </tbody>
        </table>

    </div>

    <div class="control-group" id="tab_version" style="display:none;" aria-expanded="true">
        <h2>Code versions</h2>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Repository</th>
                    <th>Version</th>
                    <th>Test class</th>
                    <th>Date/time</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat='code_version in detail_version_test.tests | filter:search'>
                    <td>{{ code_version.repository }}</td>
                    <td>{{ code_version.version }}</td>
                    <td><code>{{ code_version.path }}</code></td>
                    <td>{{ code_version.timestamp | date:'d MMMM yyyy, hh:mm' : 'UTC' }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="control-group" id="tab_results" style="display:none;" aria-expanded="true">
        <p>Some results</p>
    </div>

    <div class="control-group" id="tab_comments" style="display:none;" aria-expanded="true">
        <main class="comment" onsubmit="return false">

            <div class="panel-heading">
                <h3 class="panel-title" id="title-commment"> Comments </h3>
            </div>
            <div ng-repeat="comment in test_comments.comments" id='CommentToShow-{{comment.id}}'>

                <table class="table table-striped table-condensed">
                        <div class="comment">
                            <tbody>
                                <tr id="table-ticket-detail-comment">
                                    <td width=200>
                                        <span class="glyphicon glyphicon-user"></span> {{ comment.author }}
                                    </td>
                                    <td width=1000>
                                    </td>
                                    <td width=300>
                                        {{ comment.creation_date}}
                                    </td>
                                    <td width=50>

                                    </td>
                                </tr>

                                <tr id="table-ticket-detail-comment-content">
                                    <td width=200>
                                    </td>
                                    <td width=1000 id='editable-text-{{comment.id}}' contenteditable="false">
                                        <br/> {{ comment.text | date:'d MMMM yyyy, hh:mm' : 'UTC'  }}
                                    </td>
                                    <td width=300>
                                    </td>
                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </div>
                    </table>

                <div id='panelForButtonSave-{{comment.id}}'></div>
            </div>
        </main>

        <main action="" class="commentForm" method="POST">
            <form class="comment-form" ng-submit="submit_comment()" ng-controller="ValTestDetailCtrl">
                <div class="comment-form-fields">
                    <div class="form-group form-group-editor">
                        <h4> Add a comment </h4>
                        <p id="CommentTextbox"> 
                            <textarea cols="40" id="txt_comment" name="txt_comment" ng-model="txt_comment" rows="10" required=""></textarea>
                        </p>
                        <p class="help-text">{{ form.text.errors }}</p>
                    </div>
                </div>
                <div class="navbar navbar-form">
                    <button type="submit" id="submit" value="Submit" class="btn btn-primary">Save</button>
                </div>
            </form>

        </main>
    </div>
</div>