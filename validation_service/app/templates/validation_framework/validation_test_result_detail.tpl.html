<html id="test-result-detail" ng-controller="ValTestResultDetailCtrl">

<head>
    <nav class="navbar ">
        <br>

        <button class="button-MC" ng-click="Context.validation_goToHomeView();">Home</button>&ensp;


        <h1 align=center> Test result ID: {{test_result.id}}</h1>
    </nav>
</head>

<br>

<body>
    <div id=conteneur>
        <!--test result data -->
        <panel class=description-panel-validation-test-detail>
            <table class="table-create">
                <tbody>
                    <tr>
                        <td>
                            <b> Date: </b>
                        </td>
                        <td> {{test_result.timestamp | date:'d MMMM yyyy, hh:mm' : 'UTC' }} </td>
                    </tr>
                    <tr>
                        <td>
                            <b> Score ({{test_result.test_code.test_definition.score_type}}): </b>
                        </td>
                        <td>
                            {{test_result.score}}
                            <font class="glyphicon glyphicon-ok" ng-if="test_result.passed" color="green"> </font>
                            <!--<font class="glyphicon glyphicon-remove" ng-if="!test_result.data.passed" color="red"> </font>-->
                        </td>

                    </tr>
                </tbody>
            </table>
            <br>
            <br>
            <table>
                <tbody>
                    <tr>
                        <td>
                            <b> Project: </b>
                        </td>
                        <td> {{test_result.project}} </td>
                    </tr>
                    <tr>
                        <td>
                            <b> Platform: </b>
                        </td>
                        <td> {{test_result.platform}} </td>
                    </tr>
                    <tr>
                        <td>
                            <b> Result storage: </b>
                        </td>
                        <td> {{test_result.results_storage}} </td>
                    </tr>
                </tbody>
            </table>
        </panel>
        <panel class="caracteristics-panel-test-validation caracteristics-panel-testdetail-validation">
            <h4 align=center> <b>  Test and model parameters </b></h4>
            <br>
            <table class='table-create'>
                <tr>
                    <td style="width: 10%">
                        <table class="table-create">
                            <tbody>
                                <tr style="width: 15%" ng-if="test_result.model_version.model.model_type!=''">
                                    <td><b> Model type: </b> {{test_result.model_version.model.model_type }} </td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.model_version.model.cell_type!=''">
                                    <td> <b> Cell type: </b> {{test_result.model_version.model.cell_type }}</td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.model_version.model.brain_region!=''">
                                    <td> <b> Brain region: </b> {{ test_result.model_version.model.brain_region }}</td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.model_version.model.species!=''">
                                    <td><b> Species: </b> {{ test_result.model_version.model.species }} </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                    <td style="width: 10%">
                        <table class="table-create">
                            <tbody>
                                <tr style="width: 15%">
                                    <td><b>Test type: </b> {{ test_result.test_code.test_definition.test_type }} </td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.test_code.test_definition.data_type!=''">
                                    <td> <b> Data type: </b> {{test_result.test_code.test_definition.data_type}}</td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.test_code.test_definition.data_modality!=''">
                                    <td><b> Data modality: </b> {{test_result.test_code.test_definition.data_modality }} </td>
                                </tr>
                                <tr style="width: 15%" ng-if="test_result.test_code.test_definition.age!=''">
                                    <td><b> Age: </b> {{test_result.test_code.test_definition.age }} </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </table>
        </panel>
        <br>
        <br>
    </div>
    <!--model and test info-->
    <div id="conteneur">

        <div class="element-left">
            <br>
            <table>
                <tr>
                    <h3 align=center> Model information </h3>
                </tr>


            </table>
            <br>

            <table class="table-create">
                <tbody>
                    <tr>
                        <td style="width: 15%"> <b> Model name:  </b> {{ test_result.model_version.model.name }} &nbsp;</td>
                        <td style="width: 15%"> <b> version name: </b> {{ test_result.model_version.version}} &nbsp;</td>

                    </tr>
                </tbody>
            </table>
            <br>
            <table class="table-create">
                <tbody>
                    <tr>
                        <b> Description: </b> <br><br>
                        <div markdown="test_result.model_version.model.description" ng-text-truncate="test_result.model_version.model.description" ng-tt-words-threshold="100" ng-tt-no-toggling></div>
                        <button class=linkbutton align=right text-align=right type="button" ng-click="Context.validation_goToModelDetailView(test_result.model_version.model.id)"> (more details on model results page)</button>
                        <br>
                        <button class=linkbutton align=right text-align=right type="button" ng-click="Context.validation_goToModelCatalog(test_result.model_version.model)"> (more details on model catalog)</button>

                        <br><br>
                    </tr>
                </tbody>
            </table>


        </div>
        <div class="element-middle"></div>
        <div class="element-right">
            <br>
            <table>

                <tr>
                    <h3 align=center> Test information </h3>
                </tr>
            </table>
            <br>

            <table class="table-create">
                <tbody>
                    <tr>
                        <td style="width: 15%"> <b> Test name: </b> {{ test_result.test_code.test_definition.name }} &nbsp;</td>
                        <td style="width: 15%"> <b> version name: </b> {{ test_result.test_code.version}} &nbsp;</td>
                    </tr>
                </tbody>
            </table>
            <br>

            <table class="table-create">
                <tbody>
                    <tr>
                        <b>Protocol: </b> <br><br>
                        <div markdown="test_result.test_code.test_definition.protocol" ng-text-truncate="test_result.test_code.test_definition.protocol" ng-tt-words-threshold="100" ng-tt-no-toggling></div>
                        <button class=linkbutton align=right text-align=right type="button" ng-click="Context.validation_goToTestDetailView(test_result.test_code.test_definition.id)">(more details on test results page)</button>
                        <br><br>
                    </tr>
                </tbody>
            </table>



        </div>

    </div>

    <div>
        <h2 align=center>Storage</h2>

        <!--<table class="table-storage">-->
        <table class="table table-bordered table-hover specialCollapse">

            <thead>
                <tr>
                    <th>Name</th>
                    <th>Content_type</th>
                    <th>Creation date</th>

                    <th>Overview</th>
                    <th>Download</th>

                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="file in storage_files ">
                    <td>{{ file.name}}</td>
                    <td>{{ file.content_type }}</td>
                    <td>{{ file.created_on }}</td>
                    <td>
                        <button class="button-MC" ng-click="open_overview_file();"> Overview </button>&ensp;
                    </td>
                    <td>
                        <button class="button-MC" ng-click="download_file(file.uuid);"> Download </button>&ensp;
                    </td>


                </tr>
            </tbody>
        </table>


        <br>
        <br>



</body>

</html>